import{r as e,o as t,c as a,C as n,a as o,b as r,N as s,d as m,M as i,e as u,f as c,g as l,h as d}from"./vendor.5284dd5b.js";const h={expose:[],setup:n=>(n,o)=>{const r=e("router-view");return t(),a(r)}};let g;const p={},_=function(e,t){if(!t)return e();if(void 0===g){const e=document.createElement("link").relList;g=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in p)return;p[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":g,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))};function f(e,t){n.set(e,t)}function L(e){return n.get(e)}function E(e){n.remove(e)}const P=[{path:"/",component:()=>_((()=>import("./index.9be29018.js")),["/assets/index.9be29018.js","/assets/index.39718977.css","/assets/vendor.5284dd5b.js"]),redirect:"/home",children:[{path:"home",component:()=>_((()=>import("./home.5e26f900.js")),["/assets/home.5e26f900.js","/assets/home.086c88ae.css","/assets/vendor.5284dd5b.js"]),name:"Home",meta:{auth:!0,title:"首页",icon:"el-icon-s-home",breadCrum:!0,breadCrum_title:[{name:"系统首页",redirectPath:"/home"}]}},{path:"sys-mannage/sysLog",name:"sysLog",meta:{auth:!0,title:"系统日志",icon:"el-icon-s-home",breadCrum:!0,breadCrum_title:[{name:"系统管理",redirectPath:"/sys-mannage/sysLog"},{name:"系统日志",redirectPath:"/sys-mannage/sysLog"}]},component:()=>_((()=>import("./sysLog.6be14b14.js")),["/assets/sysLog.6be14b14.js","/assets/sysLog.b5b8fdd3.css","/assets/vendor.5284dd5b.js"])},{path:"sys-mannage/sysInfo",name:"syInfo",meta:{auth:!0,title:"系统信息",icon:"el-icon-s-home",breadCrum:!0,breadCrum_title:[{name:"系统管理",redirectPath:"/sys-mannage/sysInfo"},{name:"系统信息",redirectPath:"/sys-mannage/sysInfo"}]},component:()=>_((()=>import("./sysInfo.48021f1d.js")),["/assets/sysInfo.48021f1d.js","/assets/sysInfo.c2222e77.css","/assets/vendor.5284dd5b.js"])},{path:"user-mannage/userList",name:"userList",meta:{auth:!0,title:"用户列表",icon:"el-icon-s-home",breadCrum:!0,breadCrum_title:[{name:"用户管理",redirectPath:"/user-mannage/userList"},{name:"用户列表",redirectPath:"/user-mannage/userList"}]},component:()=>_((()=>import("./userList.9b9df437.js")),["/assets/userList.9b9df437.js","/assets/userList.b5c00204.css","/assets/vendor.5284dd5b.js"])},{path:"user-mannage/adminList",name:"adminList",meta:{auth:!0,title:"员工列表",icon:"el-icon-s-home",breadCrum:!0,breadCrum_title:[{name:"用户管理",redirectPath:"/user-mannage/adminList"},{name:"管理员列表",redirectPath:"/user-mannage/adminList"}]},component:()=>_((()=>import("./adminList.d7cc45ee.js")),["/assets/adminList.d7cc45ee.js","/assets/adminList.17896e69.css","/assets/vendor.5284dd5b.js"])},{path:"/setting",name:"setting",meta:{auth:!0,title:"个人设置",icon:"el-icon-s-home",breadCrum:!0,breadCrum_title:[{name:"个人设置",redirectPath:"/setting"}]},component:()=>_((()=>import("./personSetting.10d1aac2.js")),["/assets/personSetting.10d1aac2.js","/assets/personSetting.46215616.css","/assets/vendor.5284dd5b.js"])}]},{path:"/login",name:"login",component:()=>_((()=>import("./Login.106c2f8f.js")),["/assets/Login.106c2f8f.js","/assets/Login.99b6f94f.css","/assets/vendor.5284dd5b.js"])},{path:"/404",name:"404",component:()=>_((()=>import("./404.f3676733.js")),["/assets/404.f3676733.js","/assets/404.1de83735.css","/assets/vendor.5284dd5b.js"])},{path:"/:pathMatch(.*)",redirect:"/404"}],y=o({history:r(),routes:P});y.beforeEach(((e,t,a)=>{e.matched.some((e=>e.meta&&e.meta.auth))?"login"==e.name||L("token")?(s.start(),a()):(s.start(),a("/login")):(console.log("请先登录"),s.start(),a())})),y.afterEach((()=>{s.done()}));const b=m.create({baseURL:"http://localhost:3000",timeout:5e3});b.interceptors.request.use((e=>(e.headers["X-Token"]="my token",s.start(),e)),(e=>(console.log(e),Promise.reject(e)))),b.interceptors.response.use((e=>{const t=e.data;if(200===t.code)return s.done(),t;i.error({message:t.message||"Error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||u.confirm("您已登出, 请重新登录","确认",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((()=>{}))}),(e=>(console.log("err"+e),i({message:e.message,type:"error",duration:5e3}),Promise.reject(e))));var S=c({state:{count:0,isFload:!1,userName:L("userName")||"",role:1*L("role")||0,loginState:L("loginState")||!1,token:L("token")||""},mutations:{changeFloadState(e,t){e.isFload=t},saveUserInfoState(e,t){e.userName=t.userName,e.role=t.role,e.loginState=t.loginState,e.token=t.token},loginOutState(e,t){e.loginState=!1,e.token=""}},actions:{changeFloadStateAction({commit:e},t){e("changeFloadState",t)},saveUserInfoStateAction:({commit:e},t)=>new Promise((a=>{b.get("/userInfo.json").then((n=>{f("userName",n.result[t.userName.value].userName),f("role",n.result[t.userName.value].role),f("loginState",n.result[t.userName.value].loginState),f("token",n.result[t.userName.value].token),e("saveUserInfoState",{userName:n.result[t.userName.value].userName,role:n.result[t.userName.value].role,loginState:n.result[t.userName.value].loginState,token:n.result[t.userName.value].token}),a(n)}))})),loginOutStateAction({commit:e},t){e("loginOutState",{})}}});l(h).use(y).use(d).use(S).mount("#app");export{b as a,L as g,E as r,f as s};
